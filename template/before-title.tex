\usepackage{ragged2e}
\usepackage{fontspec}
\usepackage[T1]{fontenc}
% in R, might need to run `tinytex::tlmgr_install("plex")`
\usepackage[usefilenames,DefaultFeatures={Ligatures=Common}]{plex-otf} %
% \renewcommand*\familydefault{\sfdefault} %% set base font to be san-serif

% ## section, ### subsection and #### subsubsection

% serif version
% \addtokomafont{section}{\fontsize{16}{19.2}\rmfamily\mdseries\selectfont} 
% \addtokomafont{subsection}{\fontsize{14}{16.8}\rmfamily\mdseries\slshape\selectfont} 
% \addtokomafont{subsubsection}{\fontsize{12}{14.4}\rmfamily\selectfont}

% sans-serif version
\addtokomafont{section}{\fontsize{16}{19.2}\mdseries\selectfont} 
\addtokomafont{subsection}{\fontsize{14}{16.8}\mdseries\slshape\selectfont} 
\addtokomafont{subsubsection}{\fontsize{12}{14.4}\selectfont}

\RedeclareSectionCommand[
  %runin=false,
  afterindent=false,
  beforeskip=0pt,
  afterskip=2em]{chapter}
\RedeclareSectionCommand[
  %runin=false,
  afterindent=false,
  beforeskip=\baselineskip,
  afterskip=.1\baselineskip]{section}
\RedeclareSectionCommand[
  %runin=false,
  afterindent=false,
  beforeskip=.75\baselineskip,
  afterskip=.1\baselineskip]{subsection}
\RedeclareSectionCommand[
  %runin=false,
  afterindent=false,
  beforeskip=.1\baselineskip,
  afterskip=.1\baselineskip]{subsubsection}
\RedeclareSectionCommand[
  runin=true,
  %afterindent=false,
  beforeskip=.5\baselineskip,
  afterskip=0.5em]{paragraph}
\RedeclareSectionCommand[
  runin=true,
  %afterindent=false,
  beforeskip=.5\baselineskip,
  afterskip=.5em]{subparagraph}


\usepackage{pdfpages}


%% CAPTIONS
% \usepackage{caption}
% \DeclareCaptionStyle{italic}[justification=centering]
%  {labelfont={bf},textfont={it},labelsep=colon}
% \captionsetup[figure]{style=italic,format=hang,singlelinecheck=true}
% \captionsetup[table]{style=italic,format=hang,singlelinecheck=true}

%% FONT
% \usepackage[osf,largesc,theoremfont]{newpxtext}
% \usepackage[scaled=1.03]{inconsolata}
% \usepackage[euler-digits,euler-hat-accent]{eulervm}

% \usepackage{bera}
% \usepackage[scale=0.9]{sourcecodepro}
% \usepackage[lf,t]{FiraSans}

%% HEADERS AND FOOTERS
% \usepackage{fancyhdr}
% \pagestyle{fancy}
% \rfoot{\Large\sffamily\raisebox{-0.1cm}{\textbf{\thepage}}}
% \makeatletter
% \lhead{\textsf{\expandafter{\@title}}}
% \makeatother
% \rhead{}
% \cfoot{}
% \setlength{\headheight}{15pt}
% \renewcommand{\headrulewidth}{0.4pt}
% \renewcommand{\footrulewidth}{0.4pt}
% \fancypagestyle{plain}{%
% \fancyhf{} % clear all header and footer fields
% \fancyfoot[C]{\sffamily\thepage} % except the center
% \renewcommand{\headrulewidth}{0pt}
% \renewcommand{\footrulewidth}{0pt}}

%% MATHS
% \usepackage{bm,amsmath}
% \allowdisplaybreaks

%% GRAPHICS
% \makeatletter
% \def\fps@figure{htbp}
% \makeatother
% \setcounter{topnumber}{2}
% \setcounter{bottomnumber}{2}
% \setcounter{totalnumber}{4}
% \renewcommand{\topfraction}{0.85}
% \renewcommand{\bottomfraction}{0.85}
% \renewcommand{\textfraction}{0.15}
% \renewcommand{\floatpagefraction}{0.8}
% \graphicspath{{figures/}}

% %% SECTION TITLES
% \usepackage[compact,sf,bf]{titlesec}
% \titleformat*{\section}{\Large\sf\bfseries}
% \titleformat*{\subsection}{\large\sf\bfseries}
% \titleformat*{\subsubsection}{\sf\bfseries}
% \titlespacing{\section}{0pt}{*5}{*1}
% \titlespacing{\subsection}{0pt}{*2}{*0.2}
% \titlespacing{\subsubsection}{0pt}{*1}{*0.1}
% \titleformat{\chapter}[display]
%   {\normalfont\bfseries}{}{0pt}{\Large}

%% TABLES
% \usepackage{booktabs,tabu}

%% BIBLIOGRAPHY

% \makeatletter
% \@ifpackageloaded{biblatex}{
% \ExecuteBibliographyOptions{bibencoding=utf8,minnames=1,maxnames=3, maxbibnames=99,dashed=false,terseinits=true,giveninits=true,uniquename=false,uniquelist=false,doi=false, isbn=false,url=true,sortcites=false}
% \DeclareFieldFormat{url}{\texttt{\url{#1}}}
% \DeclareFieldFormat[article]{pages}{#1}
% \DeclareFieldFormat[inproceedings]{pages}{\lowercase{pp.}#1}
% \DeclareFieldFormat[incollection]{pages}{\lowercase{pp.}#1}
% \DeclareFieldFormat[article]{volume}{\mkbibbold{#1}}
% \DeclareFieldFormat[article]{number}{\mkbibparens{#1}}
% \DeclareFieldFormat[article]{title}{\MakeCapital{#1}}
% \DeclareFieldFormat[article]{url}{}
% \DeclareFieldFormat[inproceedings]{title}{#1}
% \DeclareFieldFormat{shorthandwidth}{#1}
% \usepackage{xpatch}
% \xpatchbibmacro{volume+number+eid}{\setunit*{\adddot}}{}{}{}
% % Remove In: for an article.
% \renewbibmacro{in:}{%
%   \ifentrytype{article}{}{%
%   \printtext{\bibstring{in}\intitlepunct}}}
% \AtEveryBibitem{\clearfield{month}}
% \AtEveryCitekey{\clearfield{month}}
% \DeclareDelimFormat[cbx@textcite]{nameyeardelim}{\addspace}
% \renewcommand*{\finalnamedelim}{\addspace\&\space}
% }{}
% \makeatother


\hypersetup{
     pdfcreator={Quarto -> pandoc -> LaTeX -> pdf}
}


%% PAGE BREAKING to avoid widows and orphans
\clubpenalty = 2000
\widowpenalty = 2000
\usepackage{microtype}
